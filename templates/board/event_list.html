{% extends "board/news_list.html" %}
{% block content %}
<link rel="stylesheet" href="/static/event.css/" />
<link href='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.css' rel='stylesheet' />
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/main.min.js'></script>
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@5.11.3/locales-all.min.js'></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            locale: 'ko',
            events: [
                {% for i in events %}
                {
                title: '{{i.title}}',
                start: '{{i.start|date:"Y-m-d" }}',
                end: '{{i.end|date:"Y-m-d" }}',
            },
            {% endfor %}
            ]
        });
    calendar.render();
    });
</script>

<section id="event">
    <div class="title">
        캘린더
    </div>
    <div id='calendar'></div>
    <ul>
        {% for i in events %}
        <a href="{% url 'board:event_detail' i.id %}">
            <li>
                <img src="{{i.thumbnail.url}}">
                <div>
                    {{i.title|truncatechars:37}}
                    <p>
                        {{ i.start|date }} ~ {{ i.end|date }}
                    </p>
                </div>
            </li>
        </a>
        {% endfor %}
    </ul>
</section>
<section id="button">
    <div></div>
    {% if is_paginated %}
    {% include "pagination.html" %}
    {% endif %}
    {% block column %}
    {% if request.user.level >= 3 %}
    <button>
        <a href="{% url 'board:event_create' %}">
            <i class="fa-solid fa-pen-to-square"></i> 글쓰기
        </a>
    </button>
    {% else %}
    <div></div>
    {% endif %}
    {% endblock column %}
</section>
{% endblock content %}